---
title: "【上級者向け】上手いアクセス解析のやり方"
date: 2010-06-08
original_id: 342
---

仕事中の脳内ＢＧＭは
１．『幻想人形劇』のイメージソング(大体midi)
２．頭文字Ｄ
３．ZARD
４．嘉門達夫
５．ハナ肇とクレイジーキャッツ
のループです、え～ちゃんですどうも。
どこにも東方がありません。いつぞやに東方っぽいのはありましたが、聞きすぎてちょっと離れてる状態……さて。
今日の記事は主にFC2ブロガーさん若しくはCSS開発者向けです。
意味が分かれば私程度の素人にも分かる程度には書きますが。
分かる人は見れば分かりますが、アクセス解析用に必要な物を埋め込んでるんですが、ここにあると邪魔なんですよね。
で、別の場所に移そうと思うんですが、これが結構我侭なシステムで「一回読んだら次を読まない」設定が出来ないんですよね。
なので「一回読んだら次を読み出さない」場所に埋め込んだら「そこだけで閲覧を終えた人を読まない」という問題点が発生。
俺にどうしろっちゅ～ねん！
Javaの埋め込みは出来ないので、HTMLで変数を操作する必要があるんですが、クッキー飛ばしたら無効になるんよねっていうｗｗ
なので、
１．アクセスIPを解析する。
２．データベースにIPがない場合（０）、１にしてカウンタを回す
　　データベースにIPがある場合（１）、ここで処理を終了する
３．２４：００の時点で今まで入っていたログを飛ばし、日付を更新する（現行のシステム）
と、仕様が変更されるか（まず間違いなく無理）
１．カウンタ者のIPを代入
２．配列IP[]==カウンタ者のIPもしくは０まで検出を続ける。
３．カウンタ者IPの場合、そこで処理を終了
　　０の場合、配列IP[]にカウンタ者IPを代入、カウンタを回す
４．２４：００の時点で配列IP[]==0まで検出。それまでのIP[]!=0は0に初期化する。
という工程をやらねばなりません。
前者はシステムに干渉するのでアレですが、後者はブログパーツでも採用されているので出来ると思うわけです。
しかし、ここが問題。
「個人情報」
自分で見る分なら良いんですが、他人が見ると思いっきり抵触します。
たとえIPに興味がなくても、アクセス回数に興味がなくても、誰かに見られる環境を作るので違法です。
今回の用途は、「私がちゃんとした履歴を見るため」にやりたい、と言い出したとは言え、簡単に悪用出来てしまうんですよね。
一昔前に流行ったマクロウィルスも大体こういう考えで出来た為、あんまり勧められない。
というか、こんな事書いてますが、普段行政なんざ脱法ザル法がまかり通るヌルい機関だと罵ってますが、これを実際にやったら捕まりますよ？
一月すればノルマ稼ぎにちょうどいい時期になりますし、私からは真面目にオススメしません。
大体にして、こんなのが通るんだったらこんなバカ記事書かないで自分でやってます。
私、志摩嶋エイジはこの記事を犯罪を助長するものに書いたものではありませんよ。
責任は取りかねます。
FC2さん、そこいらはどうなんでしょ？
重いのも承知ですし、えらい我侭言ってますが、利用者としての希望です。
サービス向上のためにご検討をお願いします。