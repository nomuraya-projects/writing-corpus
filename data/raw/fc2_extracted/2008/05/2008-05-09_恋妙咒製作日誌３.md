---
title: "恋妙咒製作日誌３"
date: 2008-05-09
original_id: 82
---

２．汎用イベントとして主人公の座標を求めて処理（マップ座標の端を検出してジャンプするようにした方が総容量として軽くなる）
ということで、昨日実証出来なかったエンカウントシステムをば。
先述した通り、システムに頼ったエンカウントはゲームオーバーに持っていかれるので使いません。
まずはエンカウント乱数のフィルタから。
正直、フィルタ自体はそんなに難しくはないんですが、それを判別させるのが難しい。
乱数処理程度なら、
乱数テンポラリ＝乱数制御変数の時に停止
主人公移動座標検出で乱数制御変数を変える
乱数制御変数≠乱数テンポラリなので、テンポラリに乱数制御を代入してフィルタ
この手順を踏まないと、主人公座標がズレている限り（歩き続けている限り）ランダム変数がくるので実質２０歩の時に出現してしまいます。
これで汎用イベント処理はクリア。
オープニング部はこれで終了……と言いたいところですが、このやり方では元々イベント敵として配置していたイベントたちとの接触時は無視されてしまったようです。